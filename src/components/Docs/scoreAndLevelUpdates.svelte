<script>
  import Header from "./Section/Templates/Header.svelte";
  import Paragraph from "./Section/Templates/Paragraph.svelte";
  import Image from "./Section/Templates/Image.svelte";
  import AccessArticle from "./Section/Templates/AccessArticle.svelte";
  import CodeSyntax from "./Section/Templates/CodeDescription/CodeSyntax.svelte";

  const article = {
    head: `Score & Level Updates`,
    description: `Son bÃ¶lÃ¼mÃ¼mÃ¼zde kullanÄ±cÄ±nÄ±n kart eÅŸleÅŸtirmesi ile birlikte 
      puan kazanmasÄ±nÄ± ve bÃ¼tÃ¼n kartlarÄ± baÅŸarÄ±lÄ± eÅŸleÅŸtirildikten sonra level 
      atlamasÄ± gibi kurgular oluÅŸturalÄ±m. Bunlara ek olarak oyunu daha eÄŸlenceli
      bir hale getirebilmek iÃ§in kullanÄ±cÄ± kart aÃ§tÄ±ÄŸÄ±nda veya kartlarÄ± baÅŸarÄ±lÄ±
      eÅŸleÅŸtirdiÄŸinde ses veya bazÄ± stillendirmeler kullanabilirsiniz. BÃ¼tÃ¼n 
      kartlar eÅŸleÅŸtirildiklerinde kullanÄ±cÄ±yÄ± tebrik eden bir iÃ§erik yazÄ±sÄ± 
      oluÅŸturabilirsiniz. KurguladÄ±ÄŸÄ±mÄ±z yapÄ±da kullanÄ±cÄ± yanlÄ±ÅŸ kartlarÄ± 
      eÅŸleÅŸtirdiÄŸinde, aldÄ±ÄŸÄ± puanÄ± azaltmak veya aÃ§abileceÄŸi kart sayÄ±sÄ±nÄ± 
      sÄ±nÄ±rlandÄ±rmak gibi aksiyonlar almadÄ±k. BunlarÄ± yaparak oyun deneyimini 
      arttÄ±rabilirsin. Biz seninle birlikte kaldÄ±ÄŸÄ±mÄ±z kÄ±sÄ±mdan devam edelim..`,
    otherDescription: `KullanÄ±cÄ±nÄ±n eÅŸleÅŸtirebildiÄŸi kartlarda puan kazanmasÄ±nÄ± 
      istiyoruz. Bunun iÃ§in hemen GameAction klasÃ¶rÃ¼me gidip yeni bir component 
      oluÅŸturuyorum.`,
    anotherDescription: `<code><i>score</i></code> deÄŸerini henÃ¼z arayÃ¼z 
      Ã¼zerinde gÃ¶rÃ¼ntÃ¼lememize raÄŸmen, konsol Ã¼zerinde inceleyebiliriz. 
      <code><i>Score</i></code>'da olduÄŸu gibi level'i arttÄ±rmada da benzer bir
      yolu takip edeceÄŸiz.`,
    anAnotherDescription: ``, // ğŸ’©
    moreDescription: `Oyuna dÃ¶nÃ¼ÅŸ bÃ¼tÃ¼n kartlarÄ± eÅŸleÅŸtirmeye Ã§alÄ±ÅŸ.. OluÅŸan 
      hataya farkettin mi? BÃ¼tÃ¼n kartlar eÅŸleÅŸtirildikten sonra yeniden 
      kapatÄ±lmadan Ã¶nceki 1-2 saniye iÃ§erisinde CardFront iÃ§erisindeki deÄŸerler
      gÃ¶zÃ¼kÃ¼yor. Bunu engellemeye Ã§alÄ±ÅŸalÄ±m..`,
    descriptionCode: `Yeni oluÅŸturduÄŸumuz <code><i>LevelUp</i></code> 
      fonksiyonu <code><i>ScoreUp</i></code> fonksiyonuna oldukÃ§a benziyoruz. 
      <code><i>level</i></code> store deÄŸerini set etmeden Ã¶nce 
      <code><i>setTimeOut</i></code> iÃ§erisinde tanÄ±mladÄ±m. Bunun birazdan bÃ¼tÃ¼n
      kartlar Ã¼zerinde yapacaÄŸÄ±mÄ±z kartlarÄ±n kapanma iÅŸlemi sÄ±rasÄ±nda en son 
      eÅŸleÅŸtirilen kart Ã§iftinin, Ã¶nceden aÃ§Ä±lan 4 kart Ã§iftinden daha  geÃ§ 
      kapanmasÄ±nÄ± engellemektir. Tekrardan main Card bileÅŸenimize dÃ¶nerek 
      oluÅŸturduÄŸumuz fonksiyonu kullanalÄ±m.`,
    codeExplanation: `Export ettiÄŸimiz <code><i>ScoreUp</i></code> fonksiyonunu 
      istediÄŸimiz yerde kullanabiliriz. Card bileÅŸenlerinde kartlarÄ±n doÄŸru 
      eÅŸleÅŸtirme yaptÄ±ÄŸÄ±mÄ±z ÅŸart ifadesinin iÃ§erisinde fonksiyonu Ã§aÄŸÄ±ralÄ±m.`,
    otherCodeExplanation: `ScoreUp bileÅŸeni kullanÄ±cÄ± doÄŸru eÅŸleÅŸtirmeleri 
      gerÃ§ekleÅŸtirdiÄŸinde +1 ÅŸeklinde sÃ¼rekli gÃ¼ncellenecektir.`,
    anotherMoreDescription: `CloseOpenCards bileÅŸenimizde closeAllCards isminde 
      bir fonksiyon oluÅŸturarak Card bileÅŸenimizde kullandÄ±ÄŸÄ±mÄ±z store 
      deÄŸerlerini sÄ±fÄ±rlayalÄ±m.`,
    endStory: ``,
    image: `assets/components/Card/ScoreUp-Component.gif`,
    anotherImage: `assets/components/Card/bug.png`,
    moreImage: `<code><i>levelUp</i></code> fonksiyonumuzu closeAllCards 
      iÃ§erisinde Ã§aÄŸÄ±rdÄ±ÄŸÄ±mÄ±zda bu hatanÄ±n Ã¶nÃ¼ne geÃ§ebiliriz.`,
    alternativeText: `ScoreUp component`,
    moreAlternativeText: `Bug when closing cards`,
    id: "score-and-level-updates",
  };

  const code = `
    <script context="module">
      import { score } from "../../Store/Score";

      export let scoreUp = () => {
        let getScore;

        score.subscribe((callScore) => {
          getScore = callScore;
        })

        let up = getScore + 1;

        score.set(up);
      }
    <\/script>
  `;

  const otherCode = `
    <script>
      ...
      import { scoreUp } from "../../../GameAction/ScoreUpdate.svelte";
      import { score } from "../../../../Store/Score"; 
      /*
        * score deÄŸerinin nasÄ±l gÃ¼ncellendiÄŸini incelemek iÃ§in Card bileÅŸene
        * import edelim.
      */
      ...

      ...
      if ($openCardsCapsule.length >= 2) {
        const firstOpenCard = $openCardsCapsule[0];
        const secondOpenCard = $openCardsCapsule[1];

        if (firstOpenCard === secondOpenCard) {
          $catchEmAll = [firstOpenCard, ...$catchEmAll];

          scoreUp();

          console.log("score=>", $score);
        }
      }
      ...
    <\/script>
  `;

  const oneMoreCode = `
    <script>
      import { level } from "../../Store/Level";

      export const levelUp = () => {
        let getLevel;

        level.subscribe((callLevel) => {
          getLevel = callLevel;
        })
        
        let up = getLevel + 1;

        setTimeout(level.set(up))
      }
    <\/script>
  `;

  const moreCode = `
    <script>
      ...
        import { levelUp } from "../../../GameAction/levelUpdate.svelte"
      ...

      ...
      if ($openCardsCapsule.length >= 2) {
        const firstOpenCard = $openCardsCapsule[0];
        const secondOpenCard = $openCardsCapsule[1];

        if (firstOpenCard === secondOpenCard) {
          $catchEmAll = [firstOpenCard, ...$catchEmAll];

          scoreUp();

          console.log("score=>", $score);

          if ($catchEmAll.length === 5) {
            levelUp();
          }
        }
      }
      ...
    <\/script>
  `;

  const anotherAnOneMoreCode = `
      <script>
        import {
          openCardsCapsule,
          cardFlipperCapsule,
          catchEmAll,
        } from "../../store/OpenedCards";

        export const mismatchedCards = (flipTime) => {
          setTimeout(() => {
            cardFlipperCapsule.set([]);
            openCardsCapsule.set([]);
          }, flipTime);
        };

        export const closeAllCards = (flipTime, callback) => {
          setTimeout(() => {
            catchEmAll.set([]);
            cardFlipperCapsule.set([]);
            openCardsCapsule.set([]);

            callback();
          }, flipTime);
        };
      <\/script>
  `;

  const title = `components > GameAction > ScoreUpdate.svelte`;
  const otherTitle = `components > Playground > Cards > Card.svelte`;
  const oneMoreTitle = `components > GameAction > LevelUpdate.svelte`;
  const moreTitle = `components > GameAction > CloseOpenCards.svelte`;
</script>

<article>
  <AccessArticle link={article.id} />
  <Header head={article.head} />
  <Paragraph text={article.description} />
  <Paragraph text={article.otherDescription} />
  <CodeSyntax {code} {title} />
  <Paragraph text={article.codeExplanation} />
  <CodeSyntax code={otherCode} title={otherTitle} />
  <Paragraph text={article.otherCodeExplanation} />
  <Image image={article.image} alternativeText={article.alternativeText} />
  <Paragraph text={article.anotherDescription} />
  <Paragraph text={article.anAnotherDescription} />
  <CodeSyntax code={oneMoreCode} title={oneMoreTitle} />
  <Paragraph text={article.descriptionCode} />
  <CodeSyntax code={moreCode} title={otherTitle} />
  <Paragraph text={article.moreDescription} />
  <Image
    image={article.anotherImage}
    alternativeText={article.moreAlternativeText}
  />
  <Paragraph text={article.anotherMoreDescription} />
  <CodeSyntax code={anotherAnOneMoreCode} title={moreTitle} />
  <Paragraph text={article.endStory} />
</article>
